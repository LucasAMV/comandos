"use strict";(self.webpackChunkcomandos_website=self.webpackChunkcomandos_website||[]).push([[791],{7139:(e,a,o)=>{o.r(a),o.d(a,{assets:()=>c,contentTitle:()=>i,default:()=>m,frontMatter:()=>s,metadata:()=>d,toc:()=>l});var r=o(4848),n=o(8453);const s={sidebar_label:"images --filter | xargs"},i="images --filter | xargs",d={id:"Docker/images filter xargs",title:"images --filter | xargs",description:'Voc\xea pode encadear o comando docker rmi com o resultado do comando docker images --filter "dangling=true" --format "{{.ID}}" usando o comando xargs. O xargs pega a sa\xedda do comando anterior e a usa como argumento para o comando seguinte.',source:"@site/docs/Docker/images filter xargs.md",sourceDirName:"Docker",slug:"/Docker/images filter xargs",permalink:"/comandos/docs/Docker/images filter xargs",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Docker/images filter xargs.md",tags:[],version:"current",frontMatter:{sidebar_label:"images --filter | xargs"},sidebar:"tutorialSidebar",previous:{title:"images --filter",permalink:"/comandos/docs/Docker/images filter"},next:{title:"Comandos do dia-a-dia",permalink:"/comandos/docs/Git/indexGit"}},c={},l=[{value:"Comando Completo:",id:"comando-completo",level:3},{value:"Explica\xe7\xe3o:",id:"explica\xe7\xe3o",level:3},{value:"Passos:",id:"passos",level:3},{value:"Comando Completo:",id:"comando-completo-1",level:3},{value:"Explica\xe7\xe3o:",id:"explica\xe7\xe3o-1",level:3}];function t(e){const a={code:"code",h1:"h1",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.h1,{id:"images---filter--xargs",children:"images --filter | xargs"}),"\n",(0,r.jsxs)(a.p,{children:["Voc\xea pode encadear o comando ",(0,r.jsx)(a.code,{children:"docker rmi"})," com o resultado do comando ",(0,r.jsx)(a.code,{children:'docker images --filter "dangling=true" --format "{{.ID}}"'})," usando o comando ",(0,r.jsx)(a.code,{children:"xargs"}),". O ",(0,r.jsx)(a.code,{children:"xargs"})," pega a sa\xedda do comando anterior e a usa como argumento para o comando seguinte."]}),"\n",(0,r.jsx)(a.h3,{id:"comando-completo",children:"Comando Completo:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:'docker images --filter "dangling=true" --format "{{.ID}}" | xargs docker rmi\n'})}),"\n",(0,r.jsx)(a.h3,{id:"explica\xe7\xe3o",children:"Explica\xe7\xe3o:"}),"\n",(0,r.jsxs)(a.p,{children:["Lista as IDs das imagens dangling (imagens n\xe3o tagueadas).\n",(0,r.jsx)(a.code,{children:'bash docker images --filter "dangling=true" --format "{{.ID}}"**: '})]}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.strong,{children:"|"}),": O pipe (",(0,r.jsx)(a.code,{children:"|"}),") passa a sa\xedda do comando anterior como entrada para o pr\xf3ximo comando."]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.strong,{children:"xargs docker rmi"}),": O comando ",(0,r.jsx)(a.code,{children:"xargs"})," usa a sa\xedda anterior (IDs das imagens) como argumento para o comando ",(0,r.jsx)(a.code,{children:"docker rmi"}),", removendo essas imagens."]}),"\n"]}),"\n",(0,r.jsx)(a.h3,{id:"passos",children:"Passos:"}),"\n",(0,r.jsxs)(a.ol,{children:["\n",(0,r.jsxs)(a.li,{children:["\n",(0,r.jsxs)(a.p,{children:[(0,r.jsx)(a.strong,{children:"Liste as imagens dangling"}),":"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:'docker images --filter "dangling=true" --format "{{.ID}}"\n'})}),"\n"]}),"\n",(0,r.jsxs)(a.li,{children:["\n",(0,r.jsxs)(a.p,{children:[(0,r.jsxs)(a.strong,{children:["Remova essas imagens com ",(0,r.jsx)(a.code,{children:"docker rmi"})," usando ",(0,r.jsx)(a.code,{children:"xargs"})]}),":"]}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:'docker images --filter "dangling=true" --format "{{.ID}}" | xargs docker rmi\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(a.p,{children:"Esse comando combinado remover\xe1 todas as imagens dangling do seu reposit\xf3rio Docker."}),"\n",(0,r.jsxs)(a.p,{children:["Para garantir que o comando ",(0,r.jsx)(a.code,{children:"xargs"})," seja executado apenas se o primeiro comando retornar algum resultado, voc\xea pode usar a estrutura ",(0,r.jsx)(a.code,{children:"if"})," junto com o comando ",(0,r.jsx)(a.code,{children:"test"})," ou ",(0,r.jsx)(a.code,{children:"["})," no shell."]}),"\n",(0,r.jsx)(a.h3,{id:"comando-completo-1",children:"Comando Completo:"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:'if [ -n "$(docker images --filter "dangling=true" --format "{{.ID}}")" ]; then\n  docker images --filter "dangling=true" --format "{{.ID}}" | xargs docker rmi\nelse\n  echo "Nenhuma imagem dangling encontrada."\nfi\n'})}),"\n",(0,r.jsx)(a.h3,{id:"explica\xe7\xe3o-1",children:"Explica\xe7\xe3o:"}),"\n",(0,r.jsxs)(a.p,{children:[(0,r.jsx)(a.code,{children:'bash **if [ -n "$(docker images --filter "dangling=true" --format "{{.ID}}")" ]**'}),": Verifica se o comando ",(0,r.jsx)(a.code,{children:'docker images --filter "dangling=true" --format "{{.ID}}"'})," retorna algum resultado. O ",(0,r.jsx)(a.code,{children:"-n"})," verifica se a string n\xe3o est\xe1 vazia."]}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.strong,{children:"then"}),": Se o comando retornar algum resultado (a string n\xe3o estiver vazia), executa o comando ",(0,r.jsx)(a.code,{children:"docker rmi"}),"."]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.strong,{children:"else"}),": Se o comando n\xe3o retornar nenhum resultado (a string estiver vazia), exibe uma mensagem informando que nenhuma imagem dangling foi encontrada."]}),"\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.strong,{children:"fi"}),": Fecha a estrutura ",(0,r.jsx)(a.code,{children:"if"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(a.p,{children:["Essa abordagem garante que o comando ",(0,r.jsx)(a.code,{children:"xargs docker rmi"})," s\xf3 ser\xe1 executado se houver imagens dangling para remover."]}),"\n",(0,r.jsx)(a.p,{children:"Se precisar de mais alguma coisa ou tiver outras d\xfavidas, estou aqui para ajudar! \ud83d\ude0a"})]})}function m(e={}){const{wrapper:a}={...(0,n.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},8453:(e,a,o)=>{o.d(a,{R:()=>i,x:()=>d});var r=o(6540);const n={},s=r.createContext(n);function i(e){const a=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function d(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),r.createElement(s.Provider,{value:a},e.children)}}}]);